<div class="container">
    <h2>Dodaj zdjęcie</h2>
    <form (ngSubmit)="onSubmit()" [formGroup]="form">
        <div class="form-group">
            <div class="mb-3">
                <label for="UploadimgControlInput" class="form-label">Zdjęcie</label>
                <input 
                    type="file"
                    class="form-control" 
                    id="UploadingControlInput" 
                    formControlName="image" 
                    name="image"
                    (change)="uploadImage($event)" 
                    [ngClass]="{ 'is-invalid': submitted && f.image.errors }"
                    placeholder="Upload Image"
                >
                <div *ngIf="submitted && f.image.errors" class="invalid-feedback">
                    <div *ngIf="f.image.errors.required">
                        Zdjęcie jest wymagane
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <label for="UploadimgControlInput" class="form-label">Wartość progowa (między 0 a 1)</label>
                <input 
                    type="number"
                    min="0"
                    max="1"
                    step="0.1"
                    class="form-control" 
                    id="UploadingControlInput" 
                    formControlName="iou_threshold"
                    name="iou_threshold" 
                    (change)="handleThresholdChange($event)"
                    [ngClass]="{ 'is-invalid': submitted && f.iou_threshold.errors }"
                >
                <div *ngIf="f.iou_threshold.errors" class="invalid-feedback">
                    <div *ngIf="f.iou_threshold.errors.required">
                        Wartosć progowa jest wymagana
                    </div>
                    <div *ngIf="f.iou_threshold.errors.min || f.iou_threshold.errors.max">
                        Wartość powinna mieścić się w zakresie pomiędzy 0 a 1
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <input type="submit" [disabled]="submitDisabled" class="btn btn-success">
            </div>
            <div *ngIf="successMessage" class="alert alert-success" role="alert">
                {{ successMessage }}
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                {{ errorMessage }}
            </div>
        </div>
    </form>
</div>